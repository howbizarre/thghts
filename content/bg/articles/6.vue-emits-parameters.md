---
title: "Vue emits с параметри"
date: "2024-03-18T14:14:42Z"
draft: true
tags: ["vue"]
slug: "vue-emits-parameters"
navigation: false
competence: "elementary"
---

Предаването на събитията във **Vue** от компонент, обратно към този, който го извиква става с **emits**. Българския превод "излъчване" не ми харесва и затова ще ползва оригиналната дума `emits` или предава. Ако не ползвате **Pinia**, `useState` на **Nuxt**, **Vuex** или друга библиотека за управление на 'състоянието', това е начина, по който се предават събитията.

<!-- more -->

## Кое е страница и кое е компонент?

Много често ме питат, това да го изкарам ли в компонентите или да го оставя в страницата. Основно правило е: ако Ви изниква въпроса, дали може да стане компонент, значи трябва да стане компонент. Освен това и самите компоненти е добре да ги групирате по определени х-ки. Ако се чудите как... Много често давам за пример [@layer](https://tailwindcss.com/docs/functions-and-directives#layer) директивата на **TailwindCSS**. Тя е добра отправна точка, как да групирате компонентите си.

Компонентите ги разделям на 2 вида:

1. **Спекуланти**: Такива, които не изпълняват никаква бизнес логика, а само рисуват и/или трансферират данни;
2. **Работници**: Такива, които извършват вторична обработка на входящите параметри и добавят бизнес логика, която връщат към извикващия ги компонент.

**Работниците** много често може да се групират един в друг, докато **Спекулантите** почти не.

## Как се предават параметри?

Имаме компонент (**Спекулант**), който показва на екрана, колко още страници с продукти остават, преди да се достигне последната страница. Нека се казва `LoadMore.vue`. Входните параметри на компонента са: кой номер страница е текущата и колко е общия брой страници. Компонента не извършва никаква бизнес логика. Пресмята колко страници остават и ги рисува. Emit-ва обратно към извикващия номера на подадената страницата.

```vue
// components/utilities/LoadMore.vue

<script lang="ts" setup>
defineProps<{
  page: number;
  totalPages: number;
}>();
</script>

<template>
  <div class="col-12 text-center q-mt-md q-mb-xl">
    <button :label="`Има още ${totalPages - page} страниц${totalPages - page > 1 ? 'и' : 'а'}`"
            @click="$emit('nextPage', Number(page))"
            class="btn btn-default btn-default--micro-action" />
  </div>
</template>
```